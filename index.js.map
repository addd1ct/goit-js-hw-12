{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '48228691-89796883a04c0782a049fa841';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (err) {\n    console.err('Error fetching data:', err);\n    throw error;\n  }\n}","export function renderImages(images) {\n  const container = document.querySelector('.images-container');\n  images.forEach(image => {\n    const imgElement = document.createElement('img');\n    imgElement.src = image.webformatURL;\n    imgElement.alt = image.tags;\n    container.appendChild(imgElement);\n  });\n}\n\nexport function toggleLoadMoreButton(isVisible) {\n  const loadMoreButton = document.querySelector('.load-more');\n  if (isVisible) {\n    loadMoreButton.classList.remove('is-hidden');\n  } else {\n    loadMoreButton.classList.add('is-hidden');\n  }\n}\n\nexport function showEndMessage() {\n  const container = document.querySelector('.container');\n  const endMessage = document.createElement('p');\n  endMessage.textContent = \"We're sorry, but you've reached the end of search results.\";\n  container.appendChild(endMessage);\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, toggleLoadMoreButton, showEndMessage } from './js/render-functions.js';\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const loadMoreButton = document.querySelector('.load-more');\n  const form = document.querySelector('.search-form');\n  const input = document.querySelector('.search-input');\n\n  loadMoreButton.classList.add('is-hidden');\n\n  form.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    currentQuery = input.value.trim();\n\n    if (currentQuery === '') return;\n\n    loadMoreButton.classList.add('is-hidden');\n\n    currentPage = 1;\n    document.querySelector('.images-container').innerHTML = '';\n\n    const data = await fetchImages(currentQuery, currentPage);\n    totalHits = data.totalHits;\n\n    renderImages(data.hits);\n    if (data.hits.length >= 15) {\n      loadMoreButton.classList.remove('is-hidden');\n    }\n\n    if (data.hits.length < 15) {\n      loadMoreButton.classList.add('is-hidden');\n      showEndMessage();\n    }\n\n    scrollPage();\n  });\n\n  loadMoreButton.addEventListener('click', async () => {\n    currentPage += 1;\n    const data = await fetchImages(currentQuery, currentPage);\n\n    renderImages(data.hits);\n    if (data.hits.length >= 15) {\n      loadMoreButton.classList.remove('is-hidden');\n    }\n\n    if (data.hits.length < 15 || data.hits.length === totalHits) {\n      loadMoreButton.classList.add('is-hidden');\n      showEndMessage();\n    }\n\n    scrollPage();\n  });\n});\n\nfunction scrollPage() {\n  const imgCard = document.querySelector('.images-container img');\n  if (imgCard) {\n    const cardHeight = imgCard.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","axios","err","renderImages","images","container","image","imgElement","showEndMessage","endMessage","currentPage","currentQuery","totalHits","loadMoreButton","form","input","e","data","scrollPage","imgCard","cardHeight"],"mappings":"svBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,MAAMC,EAAM,GAAGL,CAAQ,QAAQD,CAAO,MAAM,mBAAmBG,CAAK,CAAC,iEAAiEC,CAAI,aAAaC,CAAO,GAC9J,GAAI,CAEF,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,IACjB,OAAQE,EAAK,CACZ,cAAQ,IAAI,uBAAwBA,CAAG,EACjC,KACP,CACH,CCdO,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAAY,SAAS,cAAc,mBAAmB,EAC5DD,EAAO,QAAQE,GAAS,CACtB,MAAMC,EAAa,SAAS,cAAc,KAAK,EAC/CA,EAAW,IAAMD,EAAM,aACvBC,EAAW,IAAMD,EAAM,KACvBD,EAAU,YAAYE,CAAU,CACpC,CAAG,CACH,CAWO,SAASC,GAAiB,CAC/B,MAAMH,EAAY,SAAS,cAAc,YAAY,EAC/CI,EAAa,SAAS,cAAc,GAAG,EAC7CA,EAAW,YAAc,6DACzBJ,EAAU,YAAYI,CAAU,CAClC,CCrBA,IAAIC,EAAc,EACdC,EAAe,GACfC,EAAY,EAEhB,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,MAAMC,EAAiB,SAAS,cAAc,YAAY,EACpDC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAQ,SAAS,cAAc,eAAe,EAEpDF,EAAe,UAAU,IAAI,WAAW,EAExCC,EAAK,iBAAiB,SAAU,MAAOE,GAAM,CAI3C,GAHAA,EAAE,eAAc,EAChBL,EAAeI,EAAM,MAAM,OAEvBJ,IAAiB,GAAI,OAEzBE,EAAe,UAAU,IAAI,WAAW,EAExCH,EAAc,EACd,SAAS,cAAc,mBAAmB,EAAE,UAAY,GAExD,MAAMO,EAAO,MAAMrB,EAAYe,EAAcD,CAAW,EACxDE,EAAYK,EAAK,UAEjBd,EAAac,EAAK,IAAI,EAClBA,EAAK,KAAK,QAAU,IACtBJ,EAAe,UAAU,OAAO,WAAW,EAGzCI,EAAK,KAAK,OAAS,KACrBJ,EAAe,UAAU,IAAI,WAAW,EACxCL,KAGFU,GACJ,CAAG,EAEDL,EAAe,iBAAiB,QAAS,SAAY,CACnDH,GAAe,EACf,MAAMO,EAAO,MAAMrB,EAAYe,EAAcD,CAAW,EAExDP,EAAac,EAAK,IAAI,EAClBA,EAAK,KAAK,QAAU,IACtBJ,EAAe,UAAU,OAAO,WAAW,GAGzCI,EAAK,KAAK,OAAS,IAAMA,EAAK,KAAK,SAAWL,KAChDC,EAAe,UAAU,IAAI,WAAW,EACxCL,KAGFU,GACJ,CAAG,CACH,CAAC,EAED,SAASA,GAAa,CACpB,MAAMC,EAAU,SAAS,cAAc,uBAAuB,EAC9D,GAAIA,EAAS,CACX,MAAMC,EAAaD,EAAQ,sBAAqB,EAAG,OACnD,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,CACH"}