{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '48228691-89796883a04c0782a049fa841';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  const {data} = await axios.get(url);\n  return data;\n}","export function renderImages(images) {\n  const imagesList = document.querySelector('.images-container');\n  \n  const markup = images.map(\n    ({ webformatURL, tags, likes, views, comments, downloads, largeImageURL }) => `\n    <li class=\"image-card\">\n      <a href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" />\n        <div class=\"image-info\">\n            <p><span>Likes:</span> ${likes}</p>\n            <p><span>Views:</span> ${views}</p>\n            <p><span>Comments:</span> ${comments}</p>\n            <p><span>Downloads:</span> ${downloads}</p>\n        </div>\n      </a>\n    </li>\n    `\n  ).join('');\n\n  imagesList.insertAdjacentHTML('beforeend', markup)\n}\n\n\n\nexport function toggleLoadMoreButton(isVisible) {\n  const loadMoreButton = document.querySelector('.load-more');\n  if (isVisible) {\n    loadMoreButton.classList.remove('is-hidden');\n  } else {\n    loadMoreButton.classList.add('is-hidden');\n  }\n}","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, toggleLoadMoreButton } from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet lightbox;\nfunction initializeLightbox() {\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.images-container a');\n  } else {\n    lightbox.refresh();\n  }\n}\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\nconst loader = document.querySelector('.loader');\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const loadMoreButton = document.querySelector('.load-more');\n  const form = document.querySelector('.search-form');\n  const input = document.querySelector('.search-input');\n\n  loadMoreButton.classList.add('is-hidden');\n  loader.classList.add('is-hidden');\n\n  form.addEventListener('submit', async function (event) {\n    event.preventDefault();\n\n    currentQuery = input.value.trim();\n\n    if (currentQuery === '') return;\n\n    loadMoreButton.classList.add('is-hidden');\n    loader.classList.remove('is-hidden');\n\n    currentPage = 1;\n    document.querySelector('.images-container').innerHTML = '';\n\n    await fetchAndRenderImages(loader, loadMoreButton);\n\n    loader.classList.add('is-hidden');\n  });\n\n  loadMoreButton.addEventListener('click', async function () {\n    currentPage++;\n\n    loader.classList.remove('is-hidden');\n\n    await fetchAndRenderImages();\n\n    loader.classList.add('is-hidden');\n    scrollPage();\n  });\n});\n\nasync function fetchAndRenderImages() {\n  try {\n    const data = await fetchImages(currentQuery, currentPage);\n\n    if (data.hits.length === 0) {\n      showNoResultsMessage();\n      toggleLoadMoreButton(false);\n    } else {\n      renderImages(data.hits);\n      initializeLightbox();\n      if (currentPage * 15 >= data.totalHits) {\n        toggleLoadMoreButton(false);\n        showEndOfResultsMessage();\n      } else {\n        toggleLoadMoreButton(true);\n      }\n    }\n  } catch (err) {\n    console.error(err);\n    showEndOfResultsMessage();\n  } finally {\n    loader.classList.add('is-hidden');\n  }\n}\n\nfunction scrollPage() {\n  const imgCard = document.querySelector('.images-container img');\n  if (imgCard) {\n    const cardHeight = imgCard.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n\nfunction showNoResultsMessage() {\n      iziToast.show({\n        title: 'Notice',\n        message: \"Sorry, there are no images matching your search query. Please try again.\",\n    });\n}\n\nfunction showEndOfResultsMessage() {\n    iziToast.show({\n        title: 'Notice',\n        message: \"We're sorry, but you've reached the end of search results.\",\n    });\n}"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","data","axios","renderImages","images","imagesList","markup","webformatURL","tags","likes","views","comments","downloads","largeImageURL","toggleLoadMoreButton","isVisible","loadMoreButton","lightbox","initializeLightbox","SimpleLightbox","currentPage","currentQuery","loader","form","input","event","fetchAndRenderImages","scrollPage","showNoResultsMessage","showEndOfResultsMessage","err","imgCard","cardHeight","iziToast"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,MAAMC,EAAM,GAAGL,CAAQ,QAAQD,CAAO,MAAM,mBAAmBG,CAAK,CAAC,iEAAiEC,CAAI,aAAaC,CAAO,GAExJ,CAAC,KAAAE,CAAI,EAAI,MAAMC,EAAM,IAAIF,CAAG,EAClC,OAAOC,CACT,CCVO,SAASE,EAAaC,EAAQ,CACnC,MAAMC,EAAa,SAAS,cAAc,mBAAmB,EAEvDC,EAASF,EAAO,IACpB,CAAC,CAAE,aAAAG,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,EAAW,cAAAC,CAAa,IAAO;AAAA;AAAA,iBAEjEA,CAAa;AAAA,oBACVN,CAAY,UAAUC,CAAI;AAAA;AAAA,qCAETC,CAAK;AAAA,qCACLC,CAAK;AAAA,wCACFC,CAAQ;AAAA,yCACPC,CAAS;AAAA;AAAA;AAAA;AAAA,KAKlD,EAAI,KAAK,EAAE,EAETP,EAAW,mBAAmB,YAAaC,CAAM,CACnD,CAIO,SAASQ,EAAqBC,EAAW,CAC9C,MAAMC,EAAiB,SAAS,cAAc,YAAY,EACtDD,EACFC,EAAe,UAAU,OAAO,WAAW,EAE3CA,EAAe,UAAU,IAAI,WAAW,CAE5C,CCxBA,IAAIC,EACJ,SAASC,GAAqB,CACvBD,EAGHA,EAAS,QAAO,EAFhBA,EAAW,IAAIE,EAAe,qBAAqB,CAIvD,CAEA,IAAIC,EAAc,EACdC,EAAe,GAEnB,MAAMC,EAAS,SAAS,cAAc,SAAS,EAE/C,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,MAAMN,EAAiB,SAAS,cAAc,YAAY,EACpDO,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAQ,SAAS,cAAc,eAAe,EAEpDR,EAAe,UAAU,IAAI,WAAW,EACxCM,EAAO,UAAU,IAAI,WAAW,EAEhCC,EAAK,iBAAiB,SAAU,eAAgBE,EAAO,CACrDA,EAAM,eAAc,EAEpBJ,EAAeG,EAAM,MAAM,OAEvBH,IAAiB,KAErBL,EAAe,UAAU,IAAI,WAAW,EACxCM,EAAO,UAAU,OAAO,WAAW,EAEnCF,EAAc,EACd,SAAS,cAAc,mBAAmB,EAAE,UAAY,GAExD,MAAMM,EAA2C,EAEjDJ,EAAO,UAAU,IAAI,WAAW,EACpC,CAAG,EAEDN,EAAe,iBAAiB,QAAS,gBAAkB,CACzDI,IAEAE,EAAO,UAAU,OAAO,WAAW,EAEnC,MAAMI,EAAoB,EAE1BJ,EAAO,UAAU,IAAI,WAAW,EAChCK,GACJ,CAAG,CACH,CAAC,EAED,eAAeD,GAAuB,CACpC,GAAI,CACF,MAAMzB,EAAO,MAAML,EAAYyB,EAAcD,CAAW,EAEpDnB,EAAK,KAAK,SAAW,GACvB2B,IACAd,EAAqB,EAAK,IAE1BX,EAAaF,EAAK,IAAI,EACtBiB,IACIE,EAAc,IAAMnB,EAAK,WAC3Ba,EAAqB,EAAK,EAC1Be,KAEAf,EAAqB,EAAI,EAG9B,OAAQgB,EAAK,CACZ,QAAQ,MAAMA,CAAG,EACjBD,GACJ,QAAY,CACRP,EAAO,UAAU,IAAI,WAAW,CACjC,CACH,CAEA,SAASK,GAAa,CACpB,MAAMI,EAAU,SAAS,cAAc,uBAAuB,EAC9D,GAAIA,EAAS,CACX,MAAMC,EAAaD,EAAQ,sBAAqB,EAAG,OACnD,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,CACH,CAEA,SAASJ,GAAuB,CAC1BK,EAAS,KAAK,CACZ,MAAO,SACP,QAAS,0EACjB,CAAK,CACL,CAEA,SAASJ,GAA0B,CAC/BI,EAAS,KAAK,CACV,MAAO,SACP,QAAS,4DACjB,CAAK,CACL"}