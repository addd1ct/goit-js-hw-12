{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '48228691-89796883a04c0782a049fa841';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n  \n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (err) {\n    console.error('Error fetching data:', err);\n    throw err;\n  }\n}\n","export function renderImages(images) {\n  const container = document.querySelector('.images-container');\n  images.forEach(image => {\n    const imgElement = document.createElement('img');\n    imgElement.src = image.webformatURL;\n    imgElement.alt = image.tags;\n    container.appendChild(imgElement);\n  });\n}\n\nexport function toggleLoadMoreButton(isVisible) {\n  const loadMoreButton = document.querySelector('.load-more');\n  if (isVisible) {\n    loadMoreButton.classList.remove('is-hidden');\n  } else {\n    loadMoreButton.classList.add('is-hidden');\n  }\n}\n\nexport function showNoResultsMessage() {\n  const container = document.querySelector('.container');\n  const existingMessage = document.querySelector('.container p');\n\n  if (existingMessage) {\n    existingMessage.textContent = \"Sorry, there are no images matching your search query. Please try again.\";\n  } else {\n    const newMessage = document.createElement('p');\n    newMessage.classList.add('no-results-message');\n    newMessage.textContent = \"Sorry, there are no images matching your search query. Please try again.\";\n    container.appendChild(newMessage);\n  }\n}\n\nexport function showEndOfResultsMessage() {\n  const container = document.querySelector('.container');\n  const existingMessage = document.querySelector('.container p');\n\n  if (existingMessage) {\n    existingMessage.textContent = \"We're sorry, but you've reached the end of search results.\";\n  } else {\n    const newMessage = document.createElement('p');\n    newMessage.classList.add('end-of-results-message');\n    newMessage.textContent = \"We're sorry, but you've reached the end of search results.\";\n    container.appendChild(newMessage);\n  }\n}\n\nexport function clearMessages() {\n  const messages = document.querySelectorAll('.container p');\n  messages.forEach(message => message.remove());\n}","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, toggleLoadMoreButton, showNoResultsMessage, showEndOfResultsMessage, clearMessages } from './js/render-functions.js';\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const loadMoreButton = document.querySelector('.load-more');\n  const form = document.querySelector('.search-form');\n  const input = document.querySelector('.search-input');\n  const loader = document.querySelector('.loader');\n\n  loadMoreButton.classList.add('is-hidden');\n  loader.style.display = 'none';\n\n  form.addEventListener('submit', async function (event) {\n    event.preventDefault();\n\n    currentQuery = input.value.trim();\n\n    if (currentQuery === '') return;\n\n    loadMoreButton.classList.add('is-hidden');\n    loader.style.display = 'block';\n\n    currentPage = 1;\n    document.querySelector('.images-container').innerHTML = '';\n\n    clearMessages();\n\n    await fetchAndRenderImages();\n\n    loader.style.display = 'none';\n  });\n\n  loadMoreButton.addEventListener('click', async function () {\n    currentPage++;\n\n    loader.style.display = 'block';\n\n    await fetchAndRenderImages();\n\n    loader.style.display = 'none';\n\n    scrollPage();\n  });\n});\n\nasync function fetchAndRenderImages() {\n  try {\n    const data = await fetchImages(currentQuery, currentPage);\n\n    if (data.hits.length === 0) {\n      showNoResultsMessage();\n      toggleLoadMoreButton(false);\n    } else {\n      renderImages(data.hits);\n\n      if (currentPage * 15 >= data.totalHits) {\n        toggleLoadMoreButton(false);\n        showEndOfResultsMessage();\n      } else {\n        toggleLoadMoreButton(true);\n      }\n    }\n  } catch (error) {\n    showEndOfResultsMessage();\n  }\n}\n\nfunction scrollPage() {\n  const imgCard = document.querySelector('.images-container img');\n  if (imgCard) {\n    const cardHeight = imgCard.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","axios","err","renderImages","images","container","image","imgElement","toggleLoadMoreButton","isVisible","loadMoreButton","showNoResultsMessage","existingMessage","newMessage","showEndOfResultsMessage","clearMessages","message","currentPage","currentQuery","form","input","loader","event","fetchAndRenderImages","scrollPage","data","imgCard","cardHeight"],"mappings":"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"}